// Generated by CoffeeScript 1.7.1
var domain, serverurl;

serverurl = 'http://localhost:8008/apikey/open/';

domain = 'metoceanview.com';

wxtiles.loadConfiguration(serverurl, domain, function(config) {
  var baselayer, field, layer, layersControl, map, overlays, _i, _len, _ref;
  map = new L.Map('map', {
    center: new L.LatLng(-37.7772, 175.2756),
    zoom: 6,
    attributionControl: false
  });
  overlays = {};
  _ref = config.fields;
  for (_i = 0, _len = _ref.length; _i < _len; _i++) {
    field = _ref[_i];
    layer = L.wxTileLayer(config, {
      maxZoom: 7,
      maxNativeZoom: 8,
      reuseTiles: true
    });
    layer.setField(field);
    overlays[field.description] = layer;
  }
  baselayer = L.tileLayer('http://map{s}.nzapstrike.net/aqua3/{z}/{x}/{y}.png', {
    maxZoom: 8,
    reuseTiles: true
  });
  layersControl = L.control.layers.minimap({
    'Base Layer': baselayer
  }, overlays, {
    collapsed: false,
    overlayBackgroundLayer: baselayer
  }).addTo(map);
  return baselayer.addTo(map);
});
